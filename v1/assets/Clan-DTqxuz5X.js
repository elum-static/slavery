(() => {var e = document.createElement('style');e.innerText = ".Ep{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:inline-flex;max-width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;width:100%;overflow:hidden}html[dir=ltr] .RE>*:not(:last-child){padding-right:12px}html[dir=rtl] .RL>*:not(:last-child){padding-left:12px}.Vd>*{overflow:hidden;width:100%;max-width:100%;padding:0}.No{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.vo{overflow:hidden;padding:6px 12px}.OZ{border-radius:12px;padding:8px 12px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;background-color:var(--bg_primary)}.Nz{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;justify-content:flex-start;width:100%;min-height:22px;border-radius:12px;position:relative;cursor:pointer;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;text-decoration:none;border:0;overflow:hidden;-webkit-transition:.2s;-moz-transition:.2s;transition:.2s;background:none;padding:8px}.nh._hover:after,.oE._active:after{content:\"\";position:absolute;z-index:2;inset:0}.ZJ._hover:after{background-color:var(--bg_secondary-hover);opacity:.4}.cE._active:after{background-color:var(--bg_secondary-active);opacity:.6}.WP{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;align-items:flex-start;overflow:hidden}html[dir=ltr] .Cr{padding-right:12px;z-index:3}html[dir=rtl] .Ib{padding-left:12px;z-index:3}.CO>svg,.Wv>svg{display:block}html[dir=ltr] .YB{padding-left:12px;z-index:3}html[dir=rtl] .kD{padding-right:12px;z-index:3}.qE,.cI{width:100%;overflow:hidden;z-index:3}.eA{background-color:var(--bg_secondary)}.zb{background-color:var(--tg_bg_secondary);color:var(--text_primary)}.Fk>.kc{color:var(--tg_bg_primary)}.bY{background-color:var(--vk_bg_secondary);color:var(--text_primary)}.gT>.jj{color:var(--vk_bg_primary)}.wf{background-color:var(--tw_bg_secondary);color:var(--text_primary)}.ZO>.Uv{color:var(--tw_bg_primary)}.xv{background-color:var(--yt_bg_secondary);color:var(--text_primary)}.iu>.Wh{color:var(--yt_bg_primary)}.iq{background-color:var(--tp_bg_secondary);color:var(--text_primary)}.dh>.Ro{color:var(--tp_bg_primary)}.xC{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;width:100%}.rB{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}\n";document.head.appendChild(e)})();import{s as e,t,m as r,a as n,i as a,A as i,T as l,M as c,e as d,C as s,D as h,E as o,l as g,d as u,G as m,P as p,H as w,p as v,I as f,c as b,b as k,J as y,S as _,F as x,K as C,q as z,R as L,L as F,N as M,O as S,Q as A,W as H,f as E,X as R,Y as V,Z as I,k as Z,y as D,$ as B,a0 as j,a1 as q,a2 as P,v as T,a3 as O,a4 as U,a5 as $}from"./index-6blaqOOj.js";import{h as N,T as W,b as Y,e as G,f as J,S as K,g as Q,c as X,E as ee,P as te,G as re,A as ne,i as ae,j as ie,N as le,L as ce,k as de,l as se,m as he,n as oe,I as ge,o as ue,p as me,B as pe,q as we,r as ve,s as fe,t as be,u as ke,v as ye,d as _e,V as xe}from"./Error-YYoZ9rQV.js";const Ce=e=>{e=e.replace(/(http|https):\/\//g,"");const t=new URL("https://"+e);if(t){if(/vk\.(com|ru|cc|me)/.test(t.host))return"vkontakte";if(/t\.(me)|(telegram\.(org))/.test(t.host))return"telegram";if(/twitch\.(tv|com)/.test(t.host))return"twitch";if(/youtube\.(com|ru|be|in|me)|youtu\.be/.test(t.host))return"youtube";if(/ton\.(place)/.test(t.host))return"ton_place"}return"secondary"};var ze=t('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 class="icon icon-tabler icons-tabler-outline icon-tabler-link"viewBox="0 0 24 24"><path stroke=none d="M0 0h24v24H0z"></path><path d="m9 15 6-6M11 6l.463-.536a5 5 0 0 1 7.071 7.072L18 13M13 18l-.397.534a5.07 5.07 0 0 1-7.127 0 4.97 4.97 0 0 1 0-7.071L6 11">');const Le=(t={})=>{return r=ze(),e(r,t,!0,!0),r;var r};var Fe=t('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 16 16"><path fill=#229ED9 d="M8.006 16.013A8.006 8.006 0 1 0 8.006 0a8.006 8.006 0 0 0 0 16.013"></path><path fill=#fff fill-rule=evenodd d="M3.617 7.919A256 256 0 0 1 8.293 5.91c2.22-.923 2.681-1.085 2.98-1.097.063 0 .213.012.312.087.075.062.1.15.113.212s.024.2.012.312c-.125 1.26-.636 4.34-.91 5.749-.113.598-.337.798-.549.823-.461.037-.823-.312-1.272-.599-.698-.461-1.097-.748-1.783-1.197-.786-.524-.275-.81.174-1.272.112-.125 2.17-1.983 2.208-2.157 0-.025.012-.1-.038-.138-.05-.037-.112-.024-.162-.012-.075.012-1.197.76-3.38 2.232-.324.225-.61.324-.873.324-.286 0-.835-.162-1.247-.299-.498-.162-.897-.25-.86-.524.025-.137.224-.286.599-.436"clip-rule=evenodd>');const Me=(t={})=>{return r=Fe(),e(r,t,!0,!0),r;var r};var Se=t('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="-2 0 16 16"><path fill=#fff d="M11 7.429 9 9.714H7l-1.75 2v-2H3V1.143h8z"></path><path fill=#9146FF d="M2.5 0 0 2.857v10.286h3V16l2.5-2.857h2L12 8V0zM11 7.429 9 9.714H7l-1.75 2v-2H3V1.143h8z"></path><path fill=#9146FF d="M9.5 3.143h-1V6.57h1zM6.75 3.143h-1V6.57h1z">');const Ae=(t={})=>{return r=Se(),e(r,t,!0,!0),r;var r};var He=t('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 101 100"><g clip-path=url(#a)><path fill=#07F d="M.5 48c0-22.627 0-33.941 7.03-40.97C14.558 0 25.872 0 48.5 0h4c22.627 0 33.941 0 40.97 7.03 7.03 7.029 7.03 18.343 7.03 40.97v4c0 22.627 0 33.941-7.03 40.97C86.442 100 75.128 100 52.5 100h-4c-22.627 0-33.941 0-40.97-7.03C.5 85.942.5 74.628.5 52z"></path><path fill=#fff d="M53.709 72.042c-22.792 0-35.792-15.625-36.334-41.625h11.417C29.167 49.5 37.583 57.584 44.25 59.25V30.417H55v16.458c6.584-.708 13.5-8.208 15.833-16.458h10.75c-1.791 10.167-9.291 17.667-14.625 20.75 5.334 2.5 13.876 9.042 17.126 20.875H72.25C69.708 64.125 63.375 58 55 57.167v14.875z"></path></g><defs><clipPath id=a><path fill=#fff d="M.5 0h100v100H.5z">');const Ee=(t={})=>{return r=He(),e(r,t,!0,!0),r;var r};var Re=t('<svg xmlns=http://www.w3.org/2000/svg xml:space=preserve viewBox="0 0 158 110"><path fill=red d="M154.4 17.5c-1.8-6.7-7.1-12-13.9-13.8C128.2.5 79 .5 79 .5s-48.3-.2-60.6 3c-6.8 1.8-13.3 7.3-15.1 14C0 29.7.3 55 .3 55s-.3 25.3 3 37.5c1.8 6.7 8.4 12.2 15.1 14 12.3 3.3 60.6 3 60.6 3s48.3.2 60.6-3c6.8-1.8 13.1-7.3 14.9-14 3.3-12.1 3.3-37.5 3.3-37.5s-.1-25.3-3.4-37.5"></path><path fill=#fff d="M63.9 79.2 103.2 55 63.9 30.8z">');const Ve=(t={})=>{return r=Re(),e(r,t,!0,!0),r;var r};var Ie=t('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 200 200"><mask id=a width=166 height=152 x=17 y=24 maskUnits=userSpaceOnUse style=mask-type:alpha><path fill=#C4C4C4 d="m181.505 75.31-79.008 98.575c-.854 1.065-1.281 1.597-1.796 1.79-.452.169-.95.169-1.402 0-.515-.193-.942-.725-1.796-1.79L18.495 75.31c-.536-.669-.805-1.003-.916-1.377a2 2 0 0 1-.035-1.014c.086-.38.33-.733.82-1.436l19.044-27.4a4 4 0 0 1 .265-.36 2 2 0 0 1 .21-.207c.085-.072.178-.134.363-.26l19.755-13.322a4 4 0 0 1 .379-.24 2 2 0 0 1 .273-.118c.105-.037.215-.061.435-.11l19.886-4.471c.104-.023.155-.035.207-.044q.07-.012.14-.018c.053-.006.106-.008.211-.013L100 24l20.468.92c.105.005.158.007.211.012q.07.007.14.02c.052.008.103.02.207.043l19.886 4.47c.22.05.33.075.435.111q.141.048.273.118c.1.052.193.114.379.24H142l19.753 13.323h.001c.185.125.278.187.362.26q.114.095.211.207c.073.084.137.176.265.36l19.044 27.398c.489.704.734 1.056.82 1.437.076.335.064.685-.035 1.014-.112.374-.38.708-.916 1.377"></path></mask><g mask=url(#a)><path fill=#7EC7FF d="M0 1h200v200H0z"style=mix-blend-mode:hue></path><path fill=#7EC7FF d="M33.977 23.068h132.046v35.45H33.977z"></path><path fill=#75C1FF d="m100 58.519 26.409 28.92H73.591L100 58.52Z"></path><path fill=#7AC6FF d="M44.352 50.122 17 73.446l24.522 6.064z"></path><path fill=#8FCEFF d="M73.59 56.653 41.523 79.51l32.069 7.93V56.652Zm52.819 0 32.068 22.857-32.068 7.93z"></path><path fill=#47A9F1 d="M41.523 79.51 73.59 56.653l-29.238-6.53zm116.954 0-32.068-22.857 29.238-6.53z"></path><path fill=#7AC6FF d="M155.648 50.122 183 73.446l-24.523 6.064z"></path><path fill=#47A9F1 d="M37.75 43.593 17 73.446l27.352-23.323zm124.5-.001L183 73.446l-27.352-23.324z"></path><path fill=#47A9F1 d="M183 73.446 100 177l26.409-89.56L183 73.445Zm-166-.001L100 177 73.59 87.439z"></path><path fill=#309FF1 d="M17 73.446 95.284 177 41.523 79.51zm166 0L104.716 177l53.761-97.49z"></path><path fill=#8DCCFC d="M73.59 87.44 100 190.06l26.409-102.622H73.591Z"></path><path fill=#BFE2F7 d="m100 87.44-15.487 42.448L73.59 87.439H100Zm0 0 15.487 42.448 10.922-42.449z"></path><path fill=#99D1FF d="M73.59 87.44V56.652L100 58.519l-26.41 28.92Zm52.819 0V56.652L100 58.519l26.409 28.92Z"></path><path fill=#ADDCFF d="M86.795 72.98 100 58.518l-26.41-1.866 13.205 16.326Zm26.41 0L100 58.518l26.409-1.866-13.204 16.326Z">');const Ze=(t={})=>{return r=Ie(),e(r,t,!0,!0),r;var r},De="Ep RE RL Vd";var Be=t("<div>");const je=t=>{const i=r({},t),[l,c]=n(i,["class","classList","children"]);return d=Be(),e(d,r({get class(){return De},get classList(){return{[`${l.class}`]:!!l.class,...l.classList}}},c),!1,!0),a(d,(()=>t.children)),d;var d},qe=c();const Pe=(e,t,r,n)=>{let a=new AbortController;return(async()=>{const c=i(l),{error:d,response:s}=await async function({name:e,body:t,controller:r,headers:n}){const a=await qe.wait();try{const a=await fetch("https://slavery.elum.su"+e,{signal:r.signal,method:"POST",body:t,headers:n});return await a.json()}catch{return{response:void 0,error:{code:-1,ctirical:!0,message:"fetch error"}}}finally{a()}}({name:e,controller:a,body:t,headers:{Authorization:c}});d?n&&n(d):s&&r&&r(s)})(),a},Te=(e,t,r)=>((e,t,r)=>d("/main/clan.imageToken",e,t,r))(e,(async r=>{const n=r.token,a=new FormData;a.append("file",e.file),Ue({hash:n,file:a},(a=>{Oe({hash:n},(n=>{n.result&&(N({clan:e.clan,force_execut:!0}),t&&t(r))}),s)}),s)}),(e=>{s(e),r&&r(e)})),Oe=(e,t,r)=>((e,t,r)=>d("/main/clan.imageSet",e,t,r))(e,(async e=>{t&&t(e)}),(e=>{s(e),r&&r(e)})),Ue=(e,t,r)=>((e,t,r)=>Pe(`/cdn/upload?hash=${e.hash}`,e.file,t,r))(e,(e=>{t&&t(e)}),(e=>{s(e),r&&r(e)})),$e=e=>{const t=h(),[n]=o(t?.clan),[a]=g(),i=()=>v({modalId:f});return u(w,{get when(){return m((()=>!n()?.loading))()&&!n()?.data?.id},get children(){return u(p,{mode:"lower",get title(){return u(W,r(Y,{get children(){return a("clan.you_are_not_member")}}))},get children(){return u(G,{onClick:i,mode:"outline",streched:!0,get children(){return u(W,r(J,{get children(){return a("clan.search")}}))}})}})}})},Ne="No",We="vo",Ye="OZ";var Ge=t("<div>");const Je=e=>{const t=r({},e),[i,l]=n(t,["before","after","description","class","classList","children"]);return c=Ge(),a(c,u(K,r(l,{get classList(){return{[Ye]:!0}},get after(){return i.after},get before(){return i.before},get description(){return i.description},get children(){return i.children}}))),b((e=>{var t=We,r={[`${i.class}`]:!!i.class,...i.classList};return t!==e.e&&k(c,e.e=t),e.t=y(c,r,e.t),e}),{e:void 0,t:void 0}),c;var c},Ke={LinkCell:"Nz nh oE ZJ cE",_hover:"_hover",_active:"_active",LinkCell__in:"WP",LinkCell__before:"Cr Ib CO",LinkCell__expandable:"Wv YB kD kc jj Uv Wh Ro",LinkCell__description:"qE",LinkCell__children:"cI","LinkCell__mode--secondary":"eA","LinkCell__mode--telegram":"zb Fk","LinkCell__mode--vkontakte":"bY gT","LinkCell__mode--twitch":"wf ZO","LinkCell__mode--youtube":"xv iu","LinkCell__mode--ton_place":"iq dh"};var Qe=t("<div>"),Xe=t("<div><div>");const et=e=>{const t=r({iconSize:16},e),[i,l]=n(t,["class","classList","children","url","iconSize"]),c=Ce(i.url),d=(e=>{e=e.replace(/(http|https):\/\//g,"");const t=new URL("https://"+e);if(t)return{title:("secondary"===Ce(e)?t.host:"")+("/"!==t.pathname?t.pathname:""),href:t.toString()};return{title:"",href:void 0}})(i.url);return u(ee,r({target:"_blank",get href(){return d.href},get class(){return Ke.LinkCell},get classList(){return{[Ke[`LinkCell__mode--${c}`]]:!!c,[`${i.class}`]:!!i.class,...i.classList}}},l,{get children(){return[(n=Qe(),a(n,u(_,{get fallback(){return u(Q,{width:"16px",height:"16px"})},get children(){return[u(w,{when:"telegram"===c,get children(){return u(Me,{get height(){return i.iconSize},get width(){return i.iconSize}})}}),u(w,{when:"twitch"===c,get children(){return u(Ae,{get height(){return i.iconSize},get width(){return i.iconSize}})}}),u(w,{when:"vkontakte"===c,get children(){return u(Ee,{get height(){return i.iconSize},get width(){return i.iconSize}})}}),u(w,{when:"youtube"===c,get children(){return u(Ve,{get height(){return i.iconSize},get width(){return i.iconSize}})}}),u(w,{when:"ton_place"===c,get children(){return u(Ze,{get height(){return i.iconSize},get width(){return i.iconSize}})}}),u(w,{when:"secondary"===c,get children(){return u(Le,{color:"var(--text_primary)",get height(){return i.iconSize},get width(){return i.iconSize}})}})]}})),b((()=>k(n,Ke.LinkCell__before))),n),(t=Xe(),r=t.firstChild,a(r,u(W,{whiteSpace:"nowrap",weight:"medium",color:"primary",get children(){return d.title}})),b((e=>{var n=Ke.LinkCell__in,a=Ke.LinkCell__children;return n!==e.e&&k(t,e.e=n),a!==e.t&&k(r,e.t=a),e}),{e:void 0,t:void 0}),t),(e=Qe(),a(e,u(X,{color:"secondary"===c?"secondary":"inherit",size:"small"})),b((()=>k(e,Ke.LinkCell__expandable))),e)];var e,t,r,n}}))},tt="xC",rt="rB";var nt=t("<div>"),at=t("<div><div>");const it=()=>[u(te,{get children(){var e=nt();return a(e,u(Q,{height:"24px",width:"140px"})),b((()=>k(e,tt))),e}}),u(te,{get children(){return u(je,{get children(){return[u(re,{style:{"min-width":"min-content"},width:"max-content",borderRadius:"large",get children(){return[u(Q,{background:"primary",height:"160px",width:"160px",borderRadius:"large"}),u(te,{style:{"max-width":"160px"},mode:"block",get children(){return u(Q,{background:"primary",height:"26px",width:"100%"})}})]}}),u(re,{background:"none",borderRadius:"large",get children(){var e=at(),t=e.firstChild;return a(t,u(x,{get each(){return[...Array(3).keys()]},children:(e,t)=>{return r=nt(),a(r,u(Q,{height:"34px",width:"100%"}),null),a(r,u(te,{mode:"smallVertical"}),null),b((()=>C(r,"data-index",t()))),r;var r}})),a(e,u(Q,{height:"36px",width:"100%"}),null),b((()=>k(e,rt))),e}})]}})}})];var lt=t("<div><div>"),ct=t("<div>");const dt=e=>{const t=h(),[n]=o(t?.clan),[i]=g();return[u(w,{get when(){return n()?.loading},get children(){return u(it,{})}}),u(w,{get when(){return!n()?.loading},get children(){return[u(te,{get children(){return u(W,{align:"center",weight:"black",color:"primary",size:"bigName",get children(){return n()?.data?.name}})}}),u(te,{get children(){return u(je,{get children(){return[u(re,{style:{"min-width":"min-content"},width:"max-content",borderRadius:"large",get children(){return[u(ne,{get srcHide(){return u(ae,{})},border:"medium",mode:"large",size:"extraLargeClan",get src(){return n()?.data?.image??""}}),u(te,{style:{"max-width":"160px"},mode:"block",get children(){return u(K,{get before(){return u(ie,{height:16})},get children(){return u(W,r(Y,{size:"extraLarge",get children(){return u(le,{align:"right",max:18,get value(){return n()?.data?.coin??0}})}}))}})}})]}}),u(re,{background:"none",borderRadius:"large",get children(){var e=lt(),t=e.firstChild;return a(t,u(x,{get each(){return n()?.data?.link?.slice(0,4)},children:(e,t)=>{return r=ct(),a(r,u(et,{get url(){return e.data}}),null),a(r,u(te,{mode:"smallVertical"}),null),b((()=>C(r,"data-index",t()))),r;var r}})),a(e,u(G,{streched:!0,size:"middle",type:"accent",get children(){return u(W,r(J,{get children(){return i("system.more")}}))}}),null),b((()=>k(e,Ne))),e}})]}})}})]}})]},st=e=>{const t=h(),[n]=o(t?.clan),[a]=g(),i=()=>{z(F,(e=>(e.tab=L.MyClan,Object.assign({...e})))),v({pageId:M})},l=()=>v({pageId:S});return u(w,{get when(){return n()?.data?.is_member},get children(){return u(re,{get children(){return[u(ce,{get children(){return u(W,r(de,{get children(){return a("menu")}}))}}),u(se,{get children(){return[u(he,{onClick:i,get after(){return u(oe,{height:24})},get icon(){return u(ge,{height:48})},get children(){return a("rating.rating")}}),u(he,{onClick:l,get after(){return u(oe,{height:24})},get icon(){return u(ue,{height:48})},get children(){return a("settings.settings")}})]}})]}})}})},ht=()=>u(me,{streched:!0,get children(){return[u(Q,{width:"100%",height:"40px"}),u(Q,{width:"100%",height:"40px"})]}}),ot=e=>{const t=h(),[n]=o(t?.clan),[a]=g(),i=()=>v({modalId:A}),l=()=>v({modalId:H});return[u(w,{get when(){return n()?.loading},get children(){return u(ht,{})}}),u(w,{get when(){return m((()=>!(n()?.loading||!n()?.data)))()&&n()?.data?.is_member},get children(){return u(me,{streched:!0,get children(){return[u(G,{type:"accent",size:"middle",streched:!0,get children(){return u(W,r(J,{get children(){return a("clan.invite")}}))}}),u(G,{onClick:i,mode:"outline",size:"middle",streched:!0,get children(){return u(W,r(J,{get children(){return a("clan.leave.title")}}))}})]}})}}),u(w,{get when(){return m((()=>!(n()?.loading||!n()?.data)))()&&!n()?.data?.is_member},get children(){return u(me,{streched:!0,get children(){return[u(G,{mode:"outline",size:"middle",streched:!0,get children(){return u(W,r(J,{get children(){return a("clan.invite")}}))}}),u(G,{onClick:l,type:"accent",size:"middle",streched:!0,get children(){return u(W,r(J,{get children(){return a("clan.join.title")}}))}})]}})}})]},gt=()=>m((()=>u(x,{get each(){return[...Array(6).keys()]},children:(e,t)=>u(Q,{get"data-index"(){return t()},mode:"UserCell",background:"primary",borderRadius:"default",height:"56px",width:"auto",before:{width:"40px",height:"40px","border-radius":"50px"},after:{width:"80px",height:"30px","border-radius":"12px"},children:{width:"100%",height:"24px","border-radius":"8px"}})})))(),ut=e=>{const[t,a]=n(e,["item","position"]);return u(Je,r(a,{onClick:()=>ve(t.item.id),get after(){return u(pe,{padding:"smooth",background:"lightSecondary",get children(){return u(me,{padding:!1,get children(){return[u(we,{get level(){return t.item.level}}),u(pe,{background:"bgPrimary",padding:"square",align:"center",get children(){return u(W,r(Y,{get children(){return t.position+1}}))}})]}})}})},get before(){return u(ne,{size:"default",get src(){return t.item.avatar??""}})},get description(){return u(W,{size:"small",weight:"regular",color:"primary",get children(){return[m((()=>t.item.first_name))," ",m((()=>t.item.last_name))]}})},get children(){return u(W,r(Y,{get children(){return t.item.short_name}}))}}))},mt=e=>{const t=h(),[n]=o(t?.clan),[a]=g(),[i,l]=E([]),c=async()=>{const e=(i().length+1||1)-1,t=n()?.data?.id;if(!t)return;const r=n()?.data?.members?.pages[e];if(!r)return await new Promise((e=>{be({clan:t,page:(n()?.data?.members?.pages||[]).length+1||1},(r=>{const n=I(t);n?.data?.members&&l(Array.from(n.data.members.pages)),e(!0)}),(t=>{e(!0)}))}));l((t=>(t[e]=Array.from(r),Array.from(t))))};return R((()=>{const e=n()?.data?.id,t=n()?.data?.members;e&&t&&(t.pages.length>0&&t.update_at.getTime()<Date.now()&&V(e,(e=>{let t=e?.data;return t?.members&&(t.members={...t.members,pages:[],update_at:new Date(0)}),e})),t.pages.length>=1&&l(Array.from(t.pages.slice(0,2))))})),u(fe,{get scrollTreshold(){return window.innerHeight/2},get each(){return i()},get loadingMessage(){return u(gt,{})},get endMessage(){return[u(w,{get when(){return m((()=>!(n()?.data?.members?.error_load||!n()?.data?.members?.full_load)))()&&0==n()?.data?.members?.pages.length},get children(){return u(p,{get header(){return u(W,r(Y,{get children(){return a("clan.users.empty")}}))}})}}),u(w,{get when(){return n()?.data?.members?.error_load},get children(){return u(p,{get header(){return u(W,r(Y,{get children(){return a("system.error.error")}}))},get children(){return u(G,{onClick:c,mode:"outline",get children(){return u(W,r(J,{get children(){return a("system.error.button")}}))}})}})}})]},get hasMore(){return!!m((()=>!n()?.data?.members?.error_load))()&&!n()?.data?.members?.full_load},next:c,children:(e,t)=>u(ut,{item:e,get position(){return t()},get"data-index"(){return t()}})})},pt=()=>[u(ce,{type:"header",get after(){return u(Q,{background:"primary",height:"34px",width:"40px"})},get children(){return u(Q,{background:"primary",height:"22px",width:"100px"})}}),u(gt,{})],wt=e=>{const t=h(),[n]=o(t?.clan),[a]=g();return[u(w,{get when(){return!!n()?.loading},get children(){return u(re,{get children(){return u(pt,{})}})}}),u(w,{get when(){return!n()?.loading},get children(){return u(re,{get children(){return[u(ce,{type:"header",get after(){return u(pe,{background:"none",get description(){return u(W,{color:"secondary",size:"superSmall",align:"center",weight:"black",get children(){return a("active")}})},get children(){return u(W,{color:"accent",size:"medium",weight:"black",children:"665"})}})},get children(){return u(K,{get before(){return u(W,r(de,{get children(){return a("members")}}))},get children(){return u(pe,{get children(){return u(W,{color:"black",size:"medium",weight:"black",get children(){return n()?.data?.member??0}})}})}})}}),u(mt,{})]}})}})]},vt=e=>{const t=h(),[r]=o(t?.clan);return R((()=>{const e=t?.clan;void 0!==e&&(r()?.update_at?.getTime()??0)<=Date.now()&&N({clan:e})})),u(Z,{get nav(){return e.nav},get children(){return[u($e,{}),u(dt,{}),u(ot,{}),u(st,{}),u(wt,{})]}})},ft=e=>{const[t]=g(),n=()=>v({modalId:f});return u(p,{mode:"lower",get title(){return u(W,r(Y,{get children(){return t("clan.you_are_not_member")}}))},get children(){return u(G,{onClick:n,mode:"outline",streched:!0,get children(){return u(W,r(J,{get children(){return t("clan.search")}}))}})}})},bt=e=>{const t=h(),[r]=D(B);return j((()=>{const e=r()?.clan?.id||t?.clan;e&&q({pageId:P,params:{clan:e}})})),u(Z,{get nav(){return e.nav},get children(){return u(ft,{})}})};var kt=t("<span>");const yt=e=>{const t=h(),[n,i]=E(!1),[l]=o(t?.clan);g();const c=async()=>{const e=l()?.data?.id;if(e){const t=await(async()=>{const e=document.createElement("input");return e.type="file",e.accept="image/*",e.click(),await new Promise(((t,r)=>{e.onchange=e=>{const r=e.target;if(!r.files||!r.files[0].type.match(/image.*/))return;let n=document.createElement("canvas");n.width=200,n.height=200;const a=new FileReader;a.onload=e=>{const r=e.target?.result,a=new Image;a.onload=()=>{const e=n.getContext("2d");if(e){let r=a.width>a.height?n.height/a.height:n.width/a.width;e.drawImage(a,0,0,a.width*r,a.height*r),n.toBlob((function(e){t(e)}),"image/png")}},a.src=r},a.readAsDataURL(r.files[0])}}))})();if(!t)return;i(!0),i(!0),Te({clan:e,file:t},(e=>{i(!1)}),(e=>{i(!1)}))}};return u(te,{get children(){return u(re,{get children(){return[u(ce,{get children(){return u(W,r(de,{children:"Изображение"}))}}),u(te,{get children(){return u(je,{get children(){return[u(re,{background:"none",get children(){return u(ne,{mode:"large",size:"full",get src(){return l()?.data?.image||""}})}}),u(re,{background:"none",get children(){return u(ne,{onClick:c,background:"none",border:"dashed",mode:"large",size:"full",src:"",get srcHide(){return e=kt(),a(e,u(w,{get when(){return n()},get children(){return u(ke,{size:"medium",color:"lightSecondary"})}}),null),a(e,u(w,{get when(){return!n()},get children(){return u(ye,{color:"var(--bg_light_secondary)",width:36,height:36})}}),null),e;var e}})}})]}})}})]}})}})},_t=e=>u(Z,{get nav(){return e.nav},get children(){return u(yt,{})}}),xt="K",Ct=e=>{const[t,a]=n(e,["nav"]),i=T(t.nav);return u(xe,r({get class(){return xt},get nav(){return t.nav},get activePanel(){return i()}},a,{get children(){return[u(_e,{nav:O,component:bt}),u(_e,{nav:U,component:vt}),u(_e,{nav:$,component:_t})]}}))};export{Ct as default};
